@using CityFinder.Models;
@model City
@{
    ViewData["Title"] = "City Finder";}

<div class="text-center">
    <h1 class="display-4">Welcome to City Finder!</h1>
    <p>Search for the city that you want!</p>
</div>
<br />
<div>
    <div id="map" style="width:100%;height:450px ;margin-bottom: 10px;">
    <iframe width=100%
            height=100%
            
    position="absolute" 
    display="block"
            style="border:1px"
            loading="lazy"
            allowfullscreen
            referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps/embed/v1/place?key=@CityFinder.Configs.Credentials.GoogleMapKey
    &q=@Model.Latitude , @Model.Longitude&zoom=13">
    </iframe>
</div>
<form asp-action="Search" method="post">
    <div class="form-group">
            <input type="text" name="city" asp-for="Name" class="form-control" style="margin-bottom: 10px;" />
    
    <span asp-validation-for="Name" class="text-danger"></span>

            <input type="submit" asp-route-city="@Model.Name" class="btn btn-primary" value="Search" />
        </div>
</form>
</div>
@if (Model.Name == null)
{
    <p class="text-danger">Can't find the city</p>
}
@section Scripts {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=" +FindCityUI.Configs.Credentials.GoogleMapKey+"&callback=initMap"></script>
<script type="text/javascript"></script>
}